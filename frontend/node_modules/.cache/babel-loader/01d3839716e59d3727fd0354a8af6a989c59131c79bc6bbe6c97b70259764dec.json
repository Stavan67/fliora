{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import authService from'./services/authService';import{BrowserRouter as Router,Navigate,Route,Routes}from\"react-router-dom\";import LoginPage from'./components/auth/LoginPage';import RegisterPage from'./components/auth/RegisterPage';import EmailVerification from'./components/auth/EmailVerification';import Dashboard from'./components/dashboard/Dashboard';import ProtectedRoute from'./components/auth/ProtectedRoute';import'./styles/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[isAuthenticated,setIsAuthenticated]=useState(false);useEffect(()=>{checkAuthStatus();},[]);const checkAuthStatus=async()=>{try{const response=await authService.checkSession();if(response.authenticated){setUser({id:response.userId,username:response.username});setIsAuthenticated(true);}}catch(error){console.log('No active session');setIsAuthenticated(false);setUser(null);}finally{setLoading(false);}};const handleLogin=userData=>{setUser(userData);setIsAuthenticated(true);};const handleLogout=async()=>{try{await authService.logout();}catch(error){console.error('Logout error:',error);}finally{setUser(null);setIsAuthenticated(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"auth-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{margin:'20px auto'},children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})})})})})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(LoginPage,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(RegisterPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/verify-email\",element:/*#__PURE__*/_jsx(EmailVerification,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{isAuthenticated:isAuthenticated,children:/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:isAuthenticated?\"/dashboard\":\"/login\",replace:true})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","authService","BrowserRouter","Router","Navigate","Route","Routes","LoginPage","RegisterPage","EmailVerification","Dashboard","ProtectedRoute","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","isAuthenticated","setIsAuthenticated","checkAuthStatus","response","checkSession","authenticated","id","userId","username","error","console","log","handleLogin","userData","handleLogout","logout","className","children","style","textAlign","margin","path","element","to","replace","onLogin","onLogout"],"sources":["E:/fliora/fliora/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect} from \"react\";\r\nimport authService from './services/authService'\r\nimport { BrowserRouter as Router, Navigate, Route, Routes} from \"react-router-dom\";\r\nimport LoginPage from './components/auth/LoginPage';\r\nimport RegisterPage from './components/auth/RegisterPage';\r\nimport EmailVerification from './components/auth/EmailVerification';\r\nimport Dashboard from './components/dashboard/Dashboard';\r\nimport ProtectedRoute from './components/auth/ProtectedRoute';\r\nimport './styles/App.css'\r\n\r\nfunction App() {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n    useEffect(() => {\r\n        checkAuthStatus();\r\n    }, []);\r\n\r\n    const checkAuthStatus = async () => {\r\n        try {\r\n            const response = await authService.checkSession();\r\n            if (response.authenticated) {\r\n                setUser({\r\n                    id: response.userId,\r\n                    username: response.username\r\n                });\r\n                setIsAuthenticated(true);\r\n            }\r\n        } catch (error) {\r\n            console.log('No active session');\r\n            setIsAuthenticated(false);\r\n            setUser(null);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleLogin = (userData) => {\r\n        setUser(userData);\r\n        setIsAuthenticated(true);\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await authService.logout();\r\n        } catch (error) {\r\n            console.error('Logout error:', error);\r\n        } finally {\r\n            setUser(null);\r\n            setIsAuthenticated(false);\r\n        }\r\n    };\r\n\r\n    if(loading) {\r\n        return (\r\n            <div className=\"App\">\r\n                <div className=\"auth-page\">\r\n                    <div className=\"form-container\">\r\n                        <div style={{ textAlign: 'center' }}>\r\n                            <div className=\"loading-spinner\" style={{ margin: '20px auto' }}>\r\n                                <p>Loading...</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <div className=\"App\">\r\n                <Routes>\r\n                    <Route\r\n                        path=\"/login\"\r\n                        element={\r\n                        isAuthenticated ?\r\n                        <Navigate to=\"/dashboard\" replace /> :\r\n                        <LoginPage onLogin={handleLogin} />\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/register\"\r\n                        element={\r\n                          isAuthenticated ?\r\n                          <Navigate to=\"/dashboard\" replace /> :\r\n                          <RegisterPage />\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/verify-email\"\r\n                        element={<EmailVerification />}\r\n                     />\r\n                    <Route\r\n                        path=\"/dashboard\"\r\n                        element={\r\n                          <ProtectedRoute isAuthenticated={isAuthenticated}>\r\n                              <Dashboard user={user} onLogout={handleLogout} />\r\n                          </ProtectedRoute>\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/\"\r\n                        element={\r\n                          <Navigate to={isAuthenticated ? \"/dashboard\" : \"/login\"} replace />\r\n                        }\r\n                    />\r\n                </Routes>\r\n            </div>\r\n        </Router>\r\n    );\r\n}\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}