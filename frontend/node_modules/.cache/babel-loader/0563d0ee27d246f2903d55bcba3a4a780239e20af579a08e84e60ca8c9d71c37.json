{"ast":null,"code":"var _jsxFileName = \"E:\\\\fliora\\\\fliora\\\\frontend\\\\src\\\\components\\\\room\\\\Room.js\",\n  _s = $RefreshSig$();\n// components/room/Room.js\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport apiClient from '../../services/apiClient';\nimport webRTCService from '../../services/WebRTCService';\nimport { Client } from '@stomp/stompjs';\nimport SockJS from 'sockjs-client';\nimport VideoGrid from './VideoGrid';\nimport RoomControls from './RoomControls';\nimport RoomSidebar from './RoomSidebar';\nimport '../../styles/Room.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Room = ({\n  user,\n  onLogout\n}) => {\n  _s();\n  const [roomData, setRoomData] = useState(null);\n  const [isHost, setIsHost] = useState(false);\n  const [participants, setParticipants] = useState([]);\n  const [remoteStreams, setRemoteStreams] = useState(new Map());\n  const [localStream, setLocalStream] = useState(null);\n  const [videoEnabled, setVideoEnabled] = useState(true);\n  const [audioEnabled, setAudioEnabled] = useState(true);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatInput, setChatInput] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [stompClient, setStompClient] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const initializationRef = useRef(false);\n  useEffect(() => {\n    var _location$state, _location$state2;\n    if (!((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.roomData) && !initializationRef.current) {\n      navigate('/dashboard');\n      return;\n    }\n    if ((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.roomData && !initializationRef.current) {\n      initializationRef.current = true;\n      const room = location.state.roomData;\n      setRoomData(room);\n      setIsHost(room.isHost);\n      initializeRoom(room);\n    }\n    return () => {\n      cleanup();\n    };\n  }, [location.state]);\n  const initializeRoom = async room => {\n    try {\n      await initializeMedia();\n      await loadParticipants(room.roomCode);\n      connectWebSocket(room);\n      addSystemMessage(`Welcome to ${room.roomName}!`);\n    } catch (err) {\n      console.error('Error initializing room:', err);\n      setError('Failed to initialize room');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const initializeMedia = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          },\n          facingMode: 'user'\n        },\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      });\n      setLocalStream(stream);\n    } catch (err) {\n      console.error('Error accessing media devices:', err);\n      setError('Failed to access camera/microphone. Please check permissions.');\n      throw err;\n    }\n  };\n  const connectWebSocket = room => {\n    const socket = new SockJS('/ws');\n    const client = new Client({\n      webSocketFactory: () => socket,\n      onConnect: () => {\n        console.log('Connected to WebSocket');\n\n        // Subscribe to room notifications\n        client.subscribe(`/topic/room/${room.roomCode}`, message => {\n          handleRoomNotification(JSON.parse(message.body));\n        });\n\n        // Initialize WebRTC\n        webRTCService.initialize(client, room.roomCode, user.id, localStream);\n        webRTCService.onRemoteStream = handleRemoteStream;\n        webRTCService.onParticipantLeft = handleRemoteParticipantLeft;\n\n        // Notify others of our presence\n        webRTCService.notifyJoin();\n        setStompClient(client);\n      },\n      onDisconnect: () => {\n        console.log('Disconnected from WebSocket');\n      },\n      onStompError: error => {\n        console.error('WebSocket error:', error);\n      }\n    });\n    client.activate();\n  };\n  const handleRoomNotification = notification => {\n    const {\n      type,\n      message,\n      userId\n    } = notification;\n    switch (type) {\n      case 'USER_JOINED':\n        refreshParticipants();\n        addSystemMessage(message);\n        // Create offer for new participant\n        if (userId && userId !== user.id) {\n          setTimeout(() => webRTCService.createOffer(userId), 1000);\n        }\n        break;\n      case 'USER_LEFT':\n      case 'USER_KICKED':\n        refreshParticipants();\n        addSystemMessage(message);\n        break;\n      case 'MEDIA_UPDATED':\n        refreshParticipants();\n        break;\n      case 'ROOM_ENDED':\n        addSystemMessage(message);\n        setTimeout(() => goBackToDashboard(), 3000);\n        break;\n      default:\n        break;\n    }\n  };\n  const handleRemoteStream = (participantId, stream) => {\n    console.log('Adding remote stream for participant:', participantId);\n    setRemoteStreams(prev => {\n      const newStreams = new Map(prev);\n      newStreams.set(participantId, stream);\n      return newStreams;\n    });\n  };\n  const handleRemoteParticipantLeft = participantId => {\n    console.log('Removing remote stream for participant:', participantId);\n    setRemoteStreams(prev => {\n      const newStreams = new Map(prev);\n      newStreams.delete(participantId);\n      return newStreams;\n    });\n  };\n  const loadParticipants = async roomCode => {\n    try {\n      const response = await apiClient.get(`/api/rooms/${roomCode}/participants`);\n      setParticipants(response.data.participants);\n    } catch (err) {\n      console.error('Failed to load participants:', err);\n    }\n  };\n  const refreshParticipants = async () => {\n    if (roomData) {\n      await loadParticipants(roomData.roomCode);\n    }\n  };\n  const toggleVideo = async () => {\n    const newVideoState = !videoEnabled;\n    setVideoEnabled(newVideoState);\n    webRTCService.toggleTrack('video', newVideoState);\n    try {\n      await apiClient.post(`/api/rooms/${roomData.roomCode}/media`, {\n        videoEnabled: newVideoState,\n        audioEnabled: audioEnabled\n      });\n    } catch (err) {\n      console.error('Failed to update video status:', err);\n    }\n  };\n  const toggleAudio = async () => {\n    const newAudioState = !audioEnabled;\n    setAudioEnabled(newAudioState);\n    webRTCService.toggleTrack('audio', newAudioState);\n    try {\n      await apiClient.post(`/api/rooms/${roomData.roomCode}/media`, {\n        videoEnabled: videoEnabled,\n        audioEnabled: newAudioState\n      });\n    } catch (err) {\n      console.error('Failed to update audio status:', err);\n    }\n  };\n  const sendChatMessage = () => {\n    if (!chatInput.trim()) return;\n    const message = {\n      id: Date.now(),\n      type: 'user',\n      username: user.username,\n      message: chatInput,\n      timestamp: new Date().toLocaleTimeString()\n    };\n    setChatMessages(prev => [...prev, message]);\n    setChatInput('');\n  };\n  const addSystemMessage = message => {\n    setChatMessages(prev => [...prev, {\n      id: Date.now(),\n      type: 'system',\n      message,\n      timestamp: new Date().toLocaleTimeString()\n    }]);\n  };\n  const copyRoomLink = () => {\n    const link = `${window.location.origin}/dashboard?room=${roomData.roomCode}`;\n    navigator.clipboard.writeText(link);\n    alert('Room link copied to clipboard!');\n  };\n  const shareToWhatsApp = () => {\n    const link = `${window.location.origin}/dashboard?room=${roomData.roomCode}`;\n    const message = `Join my Fliora Watch Party!\\n\\nRoom Code: ${roomData.roomCode}\\n${link}`;\n    window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');\n  };\n  const handleStartWatchParty = async () => {\n    try {\n      setLoading(true);\n      await apiClient.post(`/api/rooms/${roomData.roomCode}/start`);\n      addSystemMessage('Starting Watch Party...');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to start watch party');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleKickParticipant = async participantId => {\n    try {\n      await apiClient.post(`/api/rooms/${roomData.roomCode}/kick/${participantId}`);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to kick participant');\n    }\n  };\n  const goBackToDashboard = async () => {\n    await cleanup();\n    navigate('/dashboard');\n  };\n  const cleanup = async () => {\n    if (localStream) {\n      localStream.getTracks().forEach(track => track.stop());\n    }\n    webRTCService.cleanup();\n    if (stompClient) {\n      stompClient.deactivate();\n    }\n    if (roomData) {\n      try {\n        await apiClient.post(`/api/rooms/${roomData.roomCode}/leave`);\n      } catch (err) {\n        console.error('Failed to leave room:', err);\n      }\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Initializing room...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"room-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"room-navbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-brand\",\n        children: [\"Fliora - \", roomData === null || roomData === void 0 ? void 0 : roomData.roomName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"room-code-display\",\n          children: [\"Room: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: roomData === null || roomData === void 0 ? void 0 : roomData.roomCode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"participant-count\",\n          children: [participants.length, \" \", participants.length === 1 ? 'participant' : 'participants']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"user-welcome\",\n          children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.username, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"leave-room-btn\",\n          onClick: goBackToDashboard,\n          children: \"Leave Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"logout-btn\",\n          onClick: onLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-error-message\",\n      children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(''),\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-main\",\n        children: [/*#__PURE__*/_jsxDEV(VideoGrid, {\n          localStream: localStream,\n          remoteStreams: remoteStreams,\n          participants: participants,\n          currentUser: user,\n          videoEnabled: videoEnabled,\n          audioEnabled: audioEnabled,\n          isHost: isHost,\n          onKickParticipant: handleKickParticipant\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(RoomControls, {\n          videoEnabled: videoEnabled,\n          audioEnabled: audioEnabled,\n          onToggleVideo: toggleVideo,\n          onToggleAudio: toggleAudio,\n          isHost: isHost,\n          onStartWatchParty: handleStartWatchParty,\n          loading: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(RoomSidebar, {\n        roomCode: roomData === null || roomData === void 0 ? void 0 : roomData.roomCode,\n        participants: participants,\n        chatMessages: chatMessages,\n        chatInput: chatInput,\n        onChatInputChange: setChatInput,\n        onSendMessage: sendChatMessage,\n        onCopyLink: copyRoomLink,\n        onShareWhatsApp: shareToWhatsApp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 9\n  }, this);\n};\n_s(Room, \"7i8f1jVCuoRE8e7RJbVMIZcIAa4=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = Room;\nexport default Room;\nvar _c;\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useLocation","apiClient","webRTCService","Client","SockJS","VideoGrid","RoomControls","RoomSidebar","jsxDEV","_jsxDEV","Room","user","onLogout","_s","roomData","setRoomData","isHost","setIsHost","participants","setParticipants","remoteStreams","setRemoteStreams","Map","localStream","setLocalStream","videoEnabled","setVideoEnabled","audioEnabled","setAudioEnabled","chatMessages","setChatMessages","chatInput","setChatInput","loading","setLoading","error","setError","stompClient","setStompClient","navigate","location","initializationRef","_location$state","_location$state2","state","current","room","initializeRoom","cleanup","initializeMedia","loadParticipants","roomCode","connectWebSocket","addSystemMessage","roomName","err","console","stream","navigator","mediaDevices","getUserMedia","video","width","ideal","height","facingMode","audio","echoCancellation","noiseSuppression","autoGainControl","socket","client","webSocketFactory","onConnect","log","subscribe","message","handleRoomNotification","JSON","parse","body","initialize","id","onRemoteStream","handleRemoteStream","onParticipantLeft","handleRemoteParticipantLeft","notifyJoin","onDisconnect","onStompError","activate","notification","type","userId","refreshParticipants","setTimeout","createOffer","goBackToDashboard","participantId","prev","newStreams","set","delete","response","get","data","toggleVideo","newVideoState","toggleTrack","post","toggleAudio","newAudioState","sendChatMessage","trim","Date","now","username","timestamp","toLocaleTimeString","copyRoomLink","link","window","origin","clipboard","writeText","alert","shareToWhatsApp","open","encodeURIComponent","handleStartWatchParty","_err$response","_err$response$data","handleKickParticipant","_err$response2","_err$response2$data","getTracks","forEach","track","stop","deactivate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","currentUser","onKickParticipant","onToggleVideo","onToggleAudio","onStartWatchParty","onChatInputChange","onSendMessage","onCopyLink","onShareWhatsApp","_c","$RefreshReg$"],"sources":["E:/fliora/fliora/frontend/src/components/room/Room.js"],"sourcesContent":["// components/room/Room.js\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport apiClient from '../../services/apiClient';\r\nimport webRTCService from '../../services/WebRTCService';\r\nimport { Client } from '@stomp/stompjs';\r\nimport SockJS from 'sockjs-client';\r\nimport VideoGrid from './VideoGrid';\r\nimport RoomControls from './RoomControls';\r\nimport RoomSidebar from './RoomSidebar';\r\nimport '../../styles/Room.css';\r\n\r\nconst Room = ({ user, onLogout }) => {\r\n    const [roomData, setRoomData] = useState(null);\r\n    const [isHost, setIsHost] = useState(false);\r\n    const [participants, setParticipants] = useState([]);\r\n    const [remoteStreams, setRemoteStreams] = useState(new Map());\r\n    const [localStream, setLocalStream] = useState(null);\r\n    const [videoEnabled, setVideoEnabled] = useState(true);\r\n    const [audioEnabled, setAudioEnabled] = useState(true);\r\n    const [chatMessages, setChatMessages] = useState([]);\r\n    const [chatInput, setChatInput] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [stompClient, setStompClient] = useState(null);\r\n\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const initializationRef = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (!location.state?.roomData && !initializationRef.current) {\r\n            navigate('/dashboard');\r\n            return;\r\n        }\r\n\r\n        if (location.state?.roomData && !initializationRef.current) {\r\n            initializationRef.current = true;\r\n            const room = location.state.roomData;\r\n            setRoomData(room);\r\n            setIsHost(room.isHost);\r\n            initializeRoom(room);\r\n        }\r\n\r\n        return () => {\r\n            cleanup();\r\n        };\r\n    }, [location.state]);\r\n\r\n    const initializeRoom = async (room) => {\r\n        try {\r\n            await initializeMedia();\r\n            await loadParticipants(room.roomCode);\r\n            connectWebSocket(room);\r\n            addSystemMessage(`Welcome to ${room.roomName}!`);\r\n        } catch (err) {\r\n            console.error('Error initializing room:', err);\r\n            setError('Failed to initialize room');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const initializeMedia = async () => {\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({\r\n                video: {\r\n                    width: { ideal: 1280 },\r\n                    height: { ideal: 720 },\r\n                    facingMode: 'user'\r\n                },\r\n                audio: {\r\n                    echoCancellation: true,\r\n                    noiseSuppression: true,\r\n                    autoGainControl: true\r\n                }\r\n            });\r\n            setLocalStream(stream);\r\n        } catch (err) {\r\n            console.error('Error accessing media devices:', err);\r\n            setError('Failed to access camera/microphone. Please check permissions.');\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const connectWebSocket = (room) => {\r\n        const socket = new SockJS('/ws');\r\n        const client = new Client({\r\n            webSocketFactory: () => socket,\r\n            onConnect: () => {\r\n                console.log('Connected to WebSocket');\r\n\r\n                // Subscribe to room notifications\r\n                client.subscribe(`/topic/room/${room.roomCode}`, (message) => {\r\n                    handleRoomNotification(JSON.parse(message.body));\r\n                });\r\n\r\n                // Initialize WebRTC\r\n                webRTCService.initialize(client, room.roomCode, user.id, localStream);\r\n                webRTCService.onRemoteStream = handleRemoteStream;\r\n                webRTCService.onParticipantLeft = handleRemoteParticipantLeft;\r\n\r\n                // Notify others of our presence\r\n                webRTCService.notifyJoin();\r\n\r\n                setStompClient(client);\r\n            },\r\n            onDisconnect: () => {\r\n                console.log('Disconnected from WebSocket');\r\n            },\r\n            onStompError: (error) => {\r\n                console.error('WebSocket error:', error);\r\n            }\r\n        });\r\n        client.activate();\r\n    };\r\n\r\n    const handleRoomNotification = (notification) => {\r\n        const { type, message, userId } = notification;\r\n\r\n        switch (type) {\r\n            case 'USER_JOINED':\r\n                refreshParticipants();\r\n                addSystemMessage(message);\r\n                // Create offer for new participant\r\n                if (userId && userId !== user.id) {\r\n                    setTimeout(() => webRTCService.createOffer(userId), 1000);\r\n                }\r\n                break;\r\n            case 'USER_LEFT':\r\n            case 'USER_KICKED':\r\n                refreshParticipants();\r\n                addSystemMessage(message);\r\n                break;\r\n            case 'MEDIA_UPDATED':\r\n                refreshParticipants();\r\n                break;\r\n            case 'ROOM_ENDED':\r\n                addSystemMessage(message);\r\n                setTimeout(() => goBackToDashboard(), 3000);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    const handleRemoteStream = (participantId, stream) => {\r\n        console.log('Adding remote stream for participant:', participantId);\r\n        setRemoteStreams(prev => {\r\n            const newStreams = new Map(prev);\r\n            newStreams.set(participantId, stream);\r\n            return newStreams;\r\n        });\r\n    };\r\n\r\n    const handleRemoteParticipantLeft = (participantId) => {\r\n        console.log('Removing remote stream for participant:', participantId);\r\n        setRemoteStreams(prev => {\r\n            const newStreams = new Map(prev);\r\n            newStreams.delete(participantId);\r\n            return newStreams;\r\n        });\r\n    };\r\n\r\n    const loadParticipants = async (roomCode) => {\r\n        try {\r\n            const response = await apiClient.get(`/api/rooms/${roomCode}/participants`);\r\n            setParticipants(response.data.participants);\r\n        } catch (err) {\r\n            console.error('Failed to load participants:', err);\r\n        }\r\n    };\r\n\r\n    const refreshParticipants = async () => {\r\n        if (roomData) {\r\n            await loadParticipants(roomData.roomCode);\r\n        }\r\n    };\r\n\r\n    const toggleVideo = async () => {\r\n        const newVideoState = !videoEnabled;\r\n        setVideoEnabled(newVideoState);\r\n        webRTCService.toggleTrack('video', newVideoState);\r\n\r\n        try {\r\n            await apiClient.post(`/api/rooms/${roomData.roomCode}/media`, {\r\n                videoEnabled: newVideoState,\r\n                audioEnabled: audioEnabled\r\n            });\r\n        } catch (err) {\r\n            console.error('Failed to update video status:', err);\r\n        }\r\n    };\r\n\r\n    const toggleAudio = async () => {\r\n        const newAudioState = !audioEnabled;\r\n        setAudioEnabled(newAudioState);\r\n        webRTCService.toggleTrack('audio', newAudioState);\r\n\r\n        try {\r\n            await apiClient.post(`/api/rooms/${roomData.roomCode}/media`, {\r\n                videoEnabled: videoEnabled,\r\n                audioEnabled: newAudioState\r\n            });\r\n        } catch (err) {\r\n            console.error('Failed to update audio status:', err);\r\n        }\r\n    };\r\n\r\n    const sendChatMessage = () => {\r\n        if (!chatInput.trim()) return;\r\n\r\n        const message = {\r\n            id: Date.now(),\r\n            type: 'user',\r\n            username: user.username,\r\n            message: chatInput,\r\n            timestamp: new Date().toLocaleTimeString()\r\n        };\r\n        setChatMessages(prev => [...prev, message]);\r\n        setChatInput('');\r\n    };\r\n\r\n    const addSystemMessage = (message) => {\r\n        setChatMessages(prev => [...prev, {\r\n            id: Date.now(),\r\n            type: 'system',\r\n            message,\r\n            timestamp: new Date().toLocaleTimeString()\r\n        }]);\r\n    };\r\n\r\n    const copyRoomLink = () => {\r\n        const link = `${window.location.origin}/dashboard?room=${roomData.roomCode}`;\r\n        navigator.clipboard.writeText(link);\r\n        alert('Room link copied to clipboard!');\r\n    };\r\n\r\n    const shareToWhatsApp = () => {\r\n        const link = `${window.location.origin}/dashboard?room=${roomData.roomCode}`;\r\n        const message = `Join my Fliora Watch Party!\\n\\nRoom Code: ${roomData.roomCode}\\n${link}`;\r\n        window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');\r\n    };\r\n\r\n    const handleStartWatchParty = async () => {\r\n        try {\r\n            setLoading(true);\r\n            await apiClient.post(`/api/rooms/${roomData.roomCode}/start`);\r\n            addSystemMessage('Starting Watch Party...');\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'Failed to start watch party');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleKickParticipant = async (participantId) => {\r\n        try {\r\n            await apiClient.post(`/api/rooms/${roomData.roomCode}/kick/${participantId}`);\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'Failed to kick participant');\r\n        }\r\n    };\r\n\r\n    const goBackToDashboard = async () => {\r\n        await cleanup();\r\n        navigate('/dashboard');\r\n    };\r\n\r\n    const cleanup = async () => {\r\n        if (localStream) {\r\n            localStream.getTracks().forEach(track => track.stop());\r\n        }\r\n\r\n        webRTCService.cleanup();\r\n\r\n        if (stompClient) {\r\n            stompClient.deactivate();\r\n        }\r\n\r\n        if (roomData) {\r\n            try {\r\n                await apiClient.post(`/api/rooms/${roomData.roomCode}/leave`);\r\n            } catch (err) {\r\n                console.error('Failed to leave room:', err);\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"room-loading\">\r\n                <div className=\"loading-spinner\"></div>\r\n                <p>Initializing room...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"room-container\">\r\n            <nav className=\"room-navbar\">\r\n                <div className=\"navbar-brand\">\r\n                    Fliora - {roomData?.roomName}\r\n                </div>\r\n                <div className=\"navbar-info\">\r\n                    <span className=\"room-code-display\">\r\n                        Room: <strong>{roomData?.roomCode}</strong>\r\n                    </span>\r\n                    <span className=\"participant-count\">\r\n                        {participants.length} {participants.length === 1 ? 'participant' : 'participants'}\r\n                    </span>\r\n                </div>\r\n                <div className=\"navbar-actions\">\r\n                    <span className=\"user-welcome\">Welcome, {user?.username}!</span>\r\n                    <button className=\"leave-room-btn\" onClick={goBackToDashboard}>\r\n                        Leave Room\r\n                    </button>\r\n                    <button className=\"logout-btn\" onClick={onLogout}>\r\n                        Logout\r\n                    </button>\r\n                </div>\r\n            </nav>\r\n\r\n            {error && (\r\n                <div className=\"room-error-message\">\r\n                    {error}\r\n                    <button onClick={() => setError('')}>Ã—</button>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"room-content\">\r\n                <div className=\"room-main\">\r\n                    <VideoGrid\r\n                        localStream={localStream}\r\n                        remoteStreams={remoteStreams}\r\n                        participants={participants}\r\n                        currentUser={user}\r\n                        videoEnabled={videoEnabled}\r\n                        audioEnabled={audioEnabled}\r\n                        isHost={isHost}\r\n                        onKickParticipant={handleKickParticipant}\r\n                    />\r\n\r\n                    <RoomControls\r\n                        videoEnabled={videoEnabled}\r\n                        audioEnabled={audioEnabled}\r\n                        onToggleVideo={toggleVideo}\r\n                        onToggleAudio={toggleAudio}\r\n                        isHost={isHost}\r\n                        onStartWatchParty={handleStartWatchParty}\r\n                        loading={loading}\r\n                    />\r\n                </div>\r\n\r\n                <RoomSidebar\r\n                    roomCode={roomData?.roomCode}\r\n                    participants={participants}\r\n                    chatMessages={chatMessages}\r\n                    chatInput={chatInput}\r\n                    onChatInputChange={setChatInput}\r\n                    onSendMessage={sendChatMessage}\r\n                    onCopyLink={copyRoomLink}\r\n                    onShareWhatsApp={shareToWhatsApp}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Room;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}